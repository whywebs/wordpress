function WMP_WAITLIST(){var JSObject=this;this.type="wmp_waitlist",this.container,this.form,this.actionBox,this.DOMDoc,this.send_btn,this.display_btn,this.submitURL,this.listType,this.init=function(){WMPJSInterface=window.parent.WMPJSInterface,this.send_btn=jQuery("#"+this.type+"_send_btn",this.container).get(0),this.display_btn=jQuery("#"+this.type+"_display_btn",this.container).get(0),this.actionBox=jQuery("#"+this.type+"_action",this.container).get(0),this.form=jQuery("#"+this.type+"_form",this.container).get(0),this.addButtonsActions(),null!=this.form&&this.initValidation()},this.initValidation=function(){this.validator=jQuery("#"+this.form.id,this.container).validate({rules:{wmp_waitlist_emailaddress:{required:!0,email:!0}},messages:{wmp_waitlist_emailaddress:{email:"Invalid e-mail address"}},errorPlacement:function(t,e){var i=e[0].id.split("_"),s=i.length>1?i[i.length-1]:i[0],n=jQuery("#error_"+s+"_container",JSObject.DOMDoc);t.appendTo(n)},errorElement:"span"});var t=jQuery("#"+this.type+"_email",this.container);t.data("holder",t.attr("placeholder")),t.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))})},this.addButtonsActions=function(){jQuery(this.send_btn).unbind("click"),jQuery(this.send_btn).bind("click",function(){JSObject.disableButton(this),JSObject.validate()}),JSObject.enableButton(this.send_btn),jQuery(this.display_btn).unbind("click"),jQuery(this.display_btn).bind("click",function(){JSObject.disableButton(this),jQuery(JSObject.form).show(),jQuery(JSObject.actionBox).hide()}),JSObject.enableButton(this.display_btn),jQuery("#"+JSObject.form.id,JSObject.DOMDoc).bind("keypress",function(t){return 13==t.keyCode?!1:void 0})},this.enableButton=function(t){jQuery(t).css("cursor","pointer"),jQuery(t).animate({opacity:1},100)},this.disableButton=function(t){jQuery(t).unbind("click"),jQuery(t).animate({opacity:.4},100),jQuery(t).css("cursor","default")},this.validate=function(){jQuery(this.form).validate().form();var t=[];for(var e in this.validator.invalid){var i=jQuery(this.form[e]);t.push(i.offset().top)}0==t.length?JSObject.sendData():JSObject.addButtonsActions()},this.sendData=function(){WMPJSInterface.Preloader.start(),jQuery.ajax({url:JSObject.submitURL,type:"post",data:{email:jQuery("#"+JSObject.type+"_emailaddress",JSObject.container).val(),list:JSObject.listType},dataType:"jsonp",success:function(responseJSON){WMPJSInterface.Preloader.remove(100);var JSON=eval(responseJSON),response=Number(String(JSON.status));if(0==response){var message="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";WMPJSInterface.Loader.display({message:message}),JSObject.form.reset(),setTimeout(function(){var t=JSObject.form.elements;for(nElems=t.length,j=0;j<nElems;j++)t[j].disabled=!1},300),JSObject.addButtonsActions()}else WMPJSInterface.Loader.display({message:JSON.message}),jQuery(JSObject.form).hide(),jQuery("#"+JSObject.type+"_added",JSObject.container).show(),(1==response||2==response)&&jQuery.post(ajaxurl,{action:"wmp_join_waitlist",joined_waitlist:JSObject.listType},function(t){})},error:function(t){}})}}